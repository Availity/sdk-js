"use strict";(self.webpackChunk_availity_dinosaurdocs=self.webpackChunk_availity_dinosaurdocs||[]).push([[219],{3941:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>p});const t=JSON.parse('{"id":"recipes/http-request","title":"Making an HTTP Request","description":"In this guide we outline ways to connect to endpoints inside the Availity portal.","source":"@site/docs/recipes/http-request.md","sourceDirName":"recipes","slug":"/recipes/http-request","permalink":"/sdk-js/recipes/http-request","draft":false,"unlisted":false,"editUrl":"https://github.com/availity/sdk-js/edit/master/docusaurus/docs/recipes/http-request.md","tags":[],"version":"current","frontMatter":{"title":"Making an HTTP Request"},"sidebar":"someSidebar","previous":{"title":"Creating a Proxy","permalink":"/sdk-js/recipes/proxy"}}');var a=s(4848),i=s(8453);const r={title:"Making an HTTP Request"},o=void 0,l={},p=[{value:"Getting Started",id:"getting-started",level:2},{value:"Example",id:"example",level:2},{value:"GET",id:"get",level:3},{value:"POST",id:"post",level:3},{value:"PUT",id:"put",level:3},{value:"DELETE",id:"delete",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"FAQ",id:"faq",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"In this guide we outline ways to connect to endpoints inside the Availity portal."}),"\n",(0,a.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,a.jsxs)(n.p,{children:["We begin by installing two libraries: ",(0,a.jsx)(n.a,{href:"https://availity.github.io/sdk-js/api/getting-started",children:"@availity/api-axios"})," and ",(0,a.jsx)(n.a,{href:"https://axios-http.com/docs/intro",children:"axios"}),". You can use either ",(0,a.jsx)(n.code,{children:"npm"})," or ",(0,a.jsx)(n.code,{children:"yarn"}),"to install them."]}),"\n",(0,a.jsx)(n.p,{children:"NPM"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm install @availity/api-axios axios\n"})}),"\n",(0,a.jsx)(n.p,{children:"Yarn"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"yarn add @availity/api-axios axios\n"})}),"\n",(0,a.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,a.jsxs)(n.p,{children:["We use ",(0,a.jsx)(n.code,{children:"@availity/api-axios"})," to send http requests to the endpoint ",(0,a.jsx)(n.code,{children:"https://apps.availity.com/api/v1/test/example"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["If our endpoint starts with ",(0,a.jsx)(n.code,{children:"/api/v1/"}),", then we only pass a ",(0,a.jsx)(n.code,{children:"name"})," to the constructor."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import AvApi from '@availity/api-axios';\n\nconst api = new AvApi({ name: 'test/example' });\n"})}),"\n",(0,a.jsx)(n.p,{children:"If your url is different from this, however, then you can also pass in a full url"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import AvApi from '@availity/api-axios';\n\n// When we call our api it uses this url: https://apps.availity.com/not-api/v2/test\nconst api = new AvApi({ url: 'not-api/v2/test' });\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Now that we have set up our api object, we can use a number of methods to call it. ",(0,a.jsx)(n.code,{children:"GET"}),", ",(0,a.jsx)(n.code,{children:"POST"}),", ",(0,a.jsx)(n.code,{children:"PUT"}),", and ",(0,a.jsx)(n.code,{children:"DELETE"})," are all available."]}),"\n",(0,a.jsx)(n.h3,{id:"get",children:"GET"}),"\n",(0,a.jsxs)(n.p,{children:["To make a call with ",(0,a.jsx)(n.code,{children:"GET"}),", use either the provided ",(0,a.jsx)(n.code,{children:"get"})," or ",(0,a.jsx)(n.code,{children:"query"})," method. I use ",(0,a.jsx)(n.code,{children:"get"})," to append an id to the url, ",(0,a.jsx)(n.code,{children:"query"})," for all other scenarios"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import AvApi from '@availity/api-axios';\n\nconst api = new AvApi({ name: 'test/example' });\n\n// get\nconst getData = async () => {\n  // This sends a request to https://apps.availity.com/api/v1/test/example/my-id\n  const response = await api.get('my-id');\n\n  // The response body is in response.data\n  return response.data;\n};\n\n// query\nconst queryData = async () => {\n  // This sends a request to https://apps.availity.com/api/v1/test/example?id=my-id\n  const response = await api.query({ params: { id: 'my-id' } });\n\n  // The response body is in response.data\n  return response.data;\n};\n"})}),"\n",(0,a.jsx)(n.h3,{id:"post",children:"POST"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import AvApi from '@availity/api-axios';\n\nconst api = new AvApi({ name: 'test/example' });\n\nconst postData = async () => {\n  // This sends a request to https://apps.availity.com/api/v1/test/example\n  const response = await api.post({ id: '123' });\n\n  // The response body is in response.data\n  return response.data;\n};\n"})}),"\n",(0,a.jsx)(n.h3,{id:"put",children:"PUT"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import AvApi from '@availity/api-axios';\n\nconst api = new AvApi({ name: 'test/example' });\n\nconst putData = async () => {\n  // This sends a request to https://apps.availity.com/api/v1/test/example/123\n  const response = await api.put('123', { name: '123' });\n\n  // The response body is in response.data\n  return response.data;\n};\n"})}),"\n",(0,a.jsx)(n.h3,{id:"delete",children:"DELETE"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import AvApi from '@availity/api-axios';\n\nconst api = new AvApi({ name: 'test/example' });\n\nconst postData = async () => {\n  // This sends a request to https://apps.availity.com/api/v1/test/example/123\n  const response = await api.delete('123');\n\n  // The response body is in response.data\n  return response.data;\n};\n"})}),"\n",(0,a.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,a.jsxs)(n.p,{children:["If you are familiar with ",(0,a.jsx)(n.code,{children:"axios"}),", you might know that an http call causes an error to be thrown when the status code is in the 400s or 500s. We recommend the following pattern to handle this behavior:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import { avUserApi } from '@availity/api-axios';\n\nconst getUser = async () => {\n  try {\n    const user = await avUserApi.me();\n\n    // The `me` method returns the data directly.\n    // No need to access `user.data`\n    return user;\n  } catch (error) {\n    // You can either return something based on the message\n    // or return the full error\n    if (error.response?.status === 401) {\n      return { error: 'You are unauthorized' };\n    }\n    return error;\n  }\n};\n"})}),"\n",(0,a.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,a.jsxs)(n.p,{children:["Q: Where does the ",(0,a.jsx)(n.code,{children:"apps.availity.com"})," part of the url come from?"]}),"\n",(0,a.jsxs)(n.p,{children:["A: ",(0,a.jsx)(n.code,{children:"@availity/api-axios"})," uses ",(0,a.jsx)(n.code,{children:"axios"})," under the hood. This lets us use relative urls so you don't have to specify which environment you want to hit. e.g.: if the app is in qa-apps.availity.com, then that is the origin of the url rather than apps.availity.com as in the example."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.p,{children:"Q: How do I add headers?"}),"\n",(0,a.jsx)(n.p,{children:"A: You can pass headers to the constructor or to the config for a specific request"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import AvApi from '@availity/api-axios';\n\nconst api = new AvApi({ name: 'test', headers: { 'A-STATIC-HEADER': '987' } });\n"})}),"\n",(0,a.jsx)(n.p,{children:"OR"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import AvApi from '@availity/api-axios';\n\nconst api = new AvApi({ name: 'test' });\n\nconst getWithHeaders = async (headerValue) => {\n  // We are using the `get` method here, however all of\n  // the http methods accept a config as the final argument\n  const response = await api.get('123', {\n    headers: { 'A-DYNAMIC-HEADER': headerValue },\n  });\n\n  return response.data;\n};\n"})})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>o});var t=s(6540);const a={},i=t.createContext(a);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);